# 安装redis

## 1.下载解压redis安装包

```
#下载
wget http://download.redis.io/releases/redis-4.0.6.tar.gz

#解压
tar -zxvf redis-4.0.6.tar.gz
```

## 2.安装依赖

```
yum install gcc
```

## 3.编译安装

```
#到redis解压目录下
cd redis-4.0.6

#编译安装
make MALLOC=libc
cd src && make install
```

## 4.启动redis的三种方法

```
#先cd到src
cd src
```

1. 直接启动

   ```
   ./redis-server
   
   #redis启动成功，但是这种启动方式需要一直打开窗口，不能进行其他操作，不太方便。
   ```

2. 以后台进程方式启动redis

   ```
   #修改redis.conf文件
   vim redis.conf
   
   #将`daemonize no`修改为`daemonize yes`
   ```
   
3. 设置redis开机自启动

   ```
   #1.在/etc目录下新建redis目录
   mkdir redis
   
   #2.将/usr/local/redis-4.0.6/redis.conf 文件复制一份到/etc/redis目录下，并命名为6379.conf
   cp /usr/local/redis-4.0.6/redis.conf /etc/redis/6379.conf
   
   #3.将redis的启动脚本复制一份放到/etc/init.d目录下
   cp /usr/local/redis-4.0.6/utils/redis_init_script /etc/init.d/redisd
   
   #4.设置redis开机自启动
   #先切换到/etc/init.d目录下,然后执行自启命令
   cd /etc/init.d
   chkconfig redisd on
   
   #看结果是redisd不支持chkconfig
   #使用vim编辑redisd文件，在第一行加入如下两行注释，保存退出
   
   # chkconfig:   2345 90 10
   # description:  Redis is a persistent key-value database
   
   (注释的意思是，redis服务必须在运行级2，3，4，5下被启动或关闭，启动的优先级是90，关闭的优先级是10。)
   
   
   #再次执行开机自启命令，成功
   chkconfig redisd on
   ```

## 5.关闭

```
service redisd stop
```

---------------------------------------------------



# 错误处理：

```
cc: ../deps/hiredis/libhiredis.a: No such file or directorycc: ../deps/lua/src/liblua.
 
cc: error: ../deps/hiredis/libhiredis.a: No such file or directory
cc: error: ../deps/lua/src/liblua.a: No such file or directory
make[1]: *** [redis-server] Error 1
make[1]: Leaving directory `/usr/local/src/redis-4.0.1/src'
make: *** [all] Error 2
```

解决方法：进入源码包目录下的deps目录中执行

```
make lua hiredis linenoise
```









